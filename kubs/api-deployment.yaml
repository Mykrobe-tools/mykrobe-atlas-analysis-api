apiVersion: apps/v1beta1
kind: Deployment
metadata:
  name: analysis-api
  labels:
    app: analysis-api  
spec:
  selector:
    matchLabels:
      app: analysis-api
  template:
    metadata:
      labels:
        app: analysis-api  
    spec:    
      imagePullSecrets:
        - name: private-registry-key
      containers:
      - name: analysis-api
        image: phelimb/mykrobe-atlas-analysis-api:bf57a2681c
        command: ["flask"]
        args: ["run", "--port", "8080"]
        ports:
          - containerPort: 8080
        envFrom:
          - configMapRef:
              name: env
