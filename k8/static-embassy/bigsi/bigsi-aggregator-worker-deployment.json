{
	"apiVersion": "apps/v1beta1",
	"kind": "Deployment",
	"metadata": {
		"name": "mykrobe-atlas-bigsi-aggregator-worker",
		"labels": {
			"app": "mykrobe-atlas-bigsi-aggregator-worker",
			"tier": "front"
		},
    	"namespace": "default"
	},
	"spec": {
		"selector": {
			"matchLabels": {
				"app": "mykrobe-atlas-bigsi-aggregator-worker"
			}
		},
		"template": {
			"metadata": {
				"labels": {
					"app": "mykrobe-atlas-bigsi-aggregator-worker"
				}
			},
			"spec": {
				"containers": [
					{
						"name": "mykrobe-atlas-bigsi-aggregator-worker",
						"image": "phelimb/bigsi-aggregator:210419",
						"command": ["celery"],
        				"args": ["-A", "bigsi_aggregator.celery", "worker","--concurrency=1"],
						"envFrom": [
							{
								"configMapRef": {
									"name": "bigsi-aggregator-env"
								}
							}
						],
						"env": [
							{
								"name": "CONFIG_HASH_MD5",
								"value": "8240ad548481b94901c8052723816e27"
							}
						]
					}
				]
			}
		}
	}
}